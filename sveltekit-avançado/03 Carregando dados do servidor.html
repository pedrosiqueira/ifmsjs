<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://unpkg.com/highlightjs-svelte/dist/svelte.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>
  <script defer>hljs.configure({ languages: ["svelte"] }); hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>

  <!-- https://github.com/arronhunt/highlightjs-copy -->
  <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
  <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
  <script defer>hljs.addPlugin(new CopyButtonPlugin());</script>

  <!-- https://github.com/TRSasasusu/highlightjs-highlight-lines.js -->
  <script src="https://cdn.jsdelivr.net/gh/TRSasasusu/highlightjs-highlight-lines.js@1.2.0/highlightjs-highlight-lines.min.js"></script>
  <script defer>hljs.highlightLinesAll([[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [{ start: 2, end: 2, color: 'lightblue' }, { start: 5, end: 5, color: 'lightblue' }, { start: 8, end: 10, color: 'lightblue' }]]);
  </script>

  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body,{delimiters:[{left: '$$', right: '$$', display: true},{left: '$', right: '$', display: false}]});"></script> -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.css">
  <script src="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.js"></script>
</head>

<h1 id="carregando-dados-no-sveltekit">Carregando Dados do Servidor</h1>
<p>Antes que um componente <code>+page.svelte</code> (e seus componentes <code>+layout.svelte</code> correspondentes) possa ser renderizado, frequentemente precisamos obter alguns dados. Isso √© feito definindo fun√ß√µes <code>load</code>.</p>

<h2 id="dados-da-p√°gina">Dados da P√°gina</h2>

<p>Um arquivo <code>+page.svelte</code> pode ter um arquivo irm√£o <code>+page.server.js</code> que exporta uma fun√ß√£o <code>load</code>. O valor retornado por essa fun√ß√£o estar√° dispon√≠vel para a p√°gina atrav√©s da propriedade <code>data</code>.</p>
<p>Crie o arquivo <code ctc>src/routes/03/test/+page.server.js</code>:</p>
<pre><code class="language-javascript">export function load() {
  return {
    post: { title: 'T√≠tulo de Exemplo', content: 'Conte√∫do &lt;b&gt;supimpa&lt;/b&gt; de Exemplo' },
    author: { name: 'Autor Exemplo', email: 'autor@exemplo.com' }
  };
}</code></pre>
<p>Crie o arquivo <code ctc>src/routes/03/test/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h1&gt;{data.post.title}&lt;/h1&gt;
&lt;sub&gt;por {data.author.name}&lt;/sub&gt;
&lt;div&gt;{@html data.post.content}&lt;/div&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> A fun√ß√£o <code>load</code> em <code>+page.server.js</code> retorna um objeto com os dados necess√°rios para a p√°gina. Esses dados s√£o acessados no componente Svelte atrav√©s da propriedade <code>data</code>.</p>

<h2 id="dados-do-layout">Dados do Layout</h2>

<p>Teus arquivos <code>+layout.svelte</code> tamb√©m podem carregar dados, via <code>+layout.server.js</code>.</p>
<p>Crie o arquivo <code ctc>src/lib/server/database.js</code>:</p>
<pre><code class="language-javascript">const posts = [
  { slug: 'um', title: 'Primeiro Post', publish_date: '2025-03-12', content: 'Conte√∫do do primeiro post' },
  { slug: 'outro', title: 'Outro Post', publish_date: '2025-03-25', content: 'Conte√∫do do outro post' },
  { slug: 'algum', title: 'Mais um Post', publish_date: '2024-11-22', content: 'Conte√∫do de mais um post' },
  { slug: 'ainda', title: 'Ainda Outro Post', publish_date: '2024-11-02', content: 'Conte√∫do de ainda outro post' }
];</code></pre>
<p><strong>Explica√ß√£o</strong>: Esse arquivo represetar√° nosso banco de dados.</p>
<p>Crie o arquivo <code ctc>src/routes/03/posts/+layout.server.js</code>:</p>
<pre><code class="language-javascript">import * as db from '$lib/server/database';

export async function load() {
  const posts = db.getAll();
  return { posts };
}</code></pre>
<p>A fun√ß√£o <code>getAll()</code> ainda n√£o existe no arquivo <code>src/lib/server/database.js</code>. Ser√° tua tarefa implement√°-la, bem como todas as outras fun√ß√µes ainda n√£o implementadas.</p>
<p>Crie o arquivo <code ctc>src/routes/03/posts/+layout.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data, children } = $props();
&lt;/script&gt;

&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col-4 bg-body-secondary&quot;&gt;
    &lt;aside&gt;
      &lt;h4&gt;√öltimos Posts&lt;/h4&gt;
      &lt;ul&gt;
        {#each data.posts.slice(0, 2) as post}
          &lt;li&gt;
            &lt;a href=&quot;/03/posts/{post.slug}&quot;&gt;
              {post.title}
            &lt;/a&gt;
          &lt;/li&gt;
        {/each}
      &lt;/ul&gt;
    &lt;/aside&gt;
  &lt;/div&gt;
  &lt;div class=&quot;col&quot;&gt;
    &lt;main&gt;
      {@render children()}
    &lt;/main&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Dados retornados pela fun√ß√£o <code>load</code> de um arquivo <code>+layout.server.js</code> ficam dispon√≠veis para todos os seus componentes <code>.svelte</code> filhos, bem como para ele pr√≥prio. Aqui, o arquivo <code>+layout.server.js</code> carrega todos os posts e os disponibiliza para o layout e suas p√°ginas filhas. No layout, exibimos os dois posts mais recentes em um menu lateral.</p>
<p>Vamos criar uma p√°gina filha. Crie o arquivo <code ctc>src/routes/03/posts/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h3&gt;Todos os Posts&lt;/h3&gt;
{#each data.posts as post}
  &lt;p&gt;&lt;a href=&quot;/03/posts/{post.slug}&quot;&gt;{post.title}&lt;/a&gt;&lt;/p&gt;
{/each}</code></pre>
<p><strong>Explica√ß√£o:</strong> A p√°gina principal lista todos os posts dispon√≠veis, utilizando os dados fornecidos pelo layout.</p>
<div class="info">
  <p><strong>Nota:</strong> Se m√∫ltiplas fun√ß√µes <code>load</code> retornarem dados com a mesma propriedade, a √∫ltima sobrescreve as anteriores. Por exemplo, se uma fun√ß√£o <code>load</code> do layout retorna <code>{ a: 1, b: 2 }</code> e a da p√°gina retorna <code>{ b: 3, c: 4 }</code>, o resultado final ser√° <code>{ a: 1, b: 3, c: 4 }</code>.</p>
</div>

<h2 id="par√¢metros-da-fun√ß√£o-load">Par√¢metros da Fun√ß√£o Load</h2>

<p>A fun√ß√£o <code>load</code> √© invocada com um objeto <code>ServerLoadEvent</code> como par√¢metro, que possui v√°rias propriedades, como <code>params</code>, <code>url</code> e <code>fetch</code>.</p>

<h3 id="params">params</h3>

<p>Uma rota pode ser um caminho est√°tico, como <code>src/routes/about</code>, ou um caminho din√¢mico, como <code>src/routes/blog/[slug]</code> ou <code>src/routes/posts/[ano]/[mes]</code>. Neste caso, <code>[slug]</code>, <code>[ano]</code> e <code>[mes]</code> s√£o chamados de <strong>par√¢metros de rota</strong>, ou seja, vari√°veis que permitem diferentes valores levarem √† mesma p√°gina.</p>
<p>Por exemplo:</p>
<ul>
  <li>A URL <code>/about</code> abrir√° a p√°gina em <code>src/routes/about</code>.</li>
  <li>As URLs <code>/blog/post1</code> e <code>/blog/post2</code> abrir√£o a mesma p√°gina din√¢mica em <code>src/routes/blog/[slug]</code>, sendo que o valor de <code>slug</code> ser√° <code>post1</code> ou <code>post2</code>, respectivamente.</li>
  <li>Da mesma forma, <code>/posts/2025/03</code> e <code>/posts/2024/11</code> abrir√£o a p√°gina <code>src/routes/posts/[ano]/[mes]</code>, com <code>ano</code> sendo <code>2025</code> ou <code>2024</code>, e <code>mes</code> sendo <code>03</code> ou <code>11</code>.</li>
</ul>
<p>A propriedade <code>params</code> √© um <strong>objeto</strong> onde cada propriedade corresponde ao nome do par√¢metro definido entre colchetes na rota, e seu valor corresponde ao trecho da URL acessada.</p>
<p>Crie o arquivo <code ctc>src/routes/03/posts/[ano]/[mes]/+page.server.js</code>:</p>
<pre><code class="language-javascript">import * as db from '$lib/server/database';

export async function load({ params }) {
  const posts = db.getByYearMonth(params.ano, params.mes);
  return { posts, ano: params.ano, mes: params.mes };
}</code></pre>
<p>Crie o arquivo <code ctc>src/routes/03/posts/[ano]/[mes]/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h3&gt;Postagens de {data.mes}/{data.ano}&lt;/h3&gt;

{#each data.posts as post}
  &lt;p&gt;&lt;a href=&quot;/03/posts/{post.slug}&quot;&gt;{post.title}&lt;/a&gt;&lt;/p&gt;
{:else}
  &lt;p&gt;Nenhuma postagem nesse m&ecirc;s!&lt;/p&gt;
{/each}</code></pre>
<p><strong>Explica√ß√£o:</strong> Utilizamos os par√¢metros de rota <code>ano</code> e <code>mes</code> para filtrar os posts por data.</p>
<p>Tamb√©m podemos implementar uma √∫nica p√°gina para exibir cada post separadamente.</p>
<p>Crie o arquivo <code ctc>src/routes/03/posts/[slug]/+page.server.js</code>:</p>
<pre><code class="language-javascript">import * as db from '$lib/server/database';

export async function load({ params }) {
  const post = db.getBySlug(params.slug);
  return { post };
}</code></pre>
<p>Crie o arquivo <code ctc>src/routes/03/posts/[slug]/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h1&gt;{data.post.title}&lt;/h1&gt;
&lt;sub&gt;Em {data.post.publish_date}&lt;/sub&gt;
&lt;p&gt;{data.post.content}&lt;/p&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Aqui, utilizamos o par√¢metro de rota <code>slug</code> para buscar e exibir um post espec√≠fico.</p>

<h3 id="url">url</h3>

<p>Al√©m dos <strong>par√¢metros de rota</strong>, tamb√©m podemos passar informa√ß√µes pela <strong>URL</strong> usando o que chamamos de <strong>par√¢metros de consulta</strong> ‚Äî tamb√©m conhecidos como <strong>query params</strong> ou <strong>search params</strong>.</p>
<p>Esses par√¢metros aparecem ap√≥s o s√≠mbolo <code>?</code> na URL. Por exemplo:</p>
<pre><code>https://meusite.com/produtos?categoria=livros&amp;ordem=preco</code></pre>
<p>Nesse caso, a URL possui dois query params:</p>
<ul>
  <li><code>categoria</code> com valor <code>&quot;livros&quot;</code></li>
  <li><code>ordem</code> com valor <code>&quot;preco&quot;</code></li>
</ul>
<p>No SvelteKit, dentro da fun√ß√£o <code>load</code>, voc√™ pode acessar esses dados atrav√©s da propriedade <code>url</code>, que √© um objeto do tipo <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/URL">URL</a>. Esse objeto representa a URL da requisi√ß√£o e cont√©m v√°rias informa√ß√µes √∫teis, como:</p>
<ul>
  <li><code>origin</code>: origem da URL (ex: <code>https://meusite.com</code>)</li>
  <li><code>pathname</code>: caminho da URL (ex: <code>/produtos</code>)</li>
  <li><code>searchParams</code>: um objeto do tipo <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams">URLSearchParams</a>, que representa os par√¢metros de consulta da URL e permite acessar facilmente os valores dos query params.</li>
</ul>
<p>Crie o arquivo <code ctc>src/routes/03/posts/query/+page.server.js</code>:</p>
<pre><code class="language-javascript">import * as db from '$lib/server/database';

export async function load({ url }) {
  console.log(url);
  const title = url.searchParams.get('title') || null;
  const content = url.searchParams.get('content') || null;

  if (!title && !content) return { posts: db.getAll() };

  return { posts: db.getByQuery(title, content) };
}</code></pre>
<div class="info">
  <p>üí° <strong>Dica:</strong> Neste exemplo, usamos <code>console.log()</code> para exibir o conte√∫do da URL e dos par√¢metros no terminal ou no console do navegador. Essa √© uma ferramenta muito √∫til para <strong>debugar</strong> (ou seja, investigar e entender o que est√° acontecendo no seu c√≥digo).</p>
  <p>Sempre que estiver em d√∫vida sobre o que uma vari√°vel cont√©m, experimente usar <code>console.log(minhaVariavel)</code> para visualizar seu valor. Isso pode ajudar bastante na hora de identificar problemas e entender melhor o fluxo do programa.</p>
</div>
<p>Crie o arquivo <code ctc>src/routes/03/posts/query/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;form&gt;
  &lt;input type=&quot;text&quot; name=&quot;title&quot; placeholder=&quot;Busca por t√≠tulo...&quot; /&gt;
  &lt;input type=&quot;text&quot; name=&quot;content&quot; placeholder=&quot;Busca por conte√∫do...&quot; /&gt;
  &lt;button type=&quot;submit&quot;&gt;Search&lt;/button&gt;
&lt;/form&gt;

&lt;h1&gt;Busca de posts&lt;/h1&gt;

&lt;ul&gt;
  {#each data.posts as post}
    &lt;li&gt;&lt;a href=&quot;/03/posts/{post.slug}&quot;&gt;{post.title}&lt;/a&gt;&lt;/li&gt;
  {:else}
    &lt;li&gt;Nenhum resultado encontrado.&lt;/li&gt;
  {/each}
&lt;/ul&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Neste exemplo, a fun√ß√£o <code>load</code> acessa os par√¢metros da URL usando <code>url.searchParams.get('termo')</code>, permitindo buscar posts por t√≠tulo. Isso simula uma funcionalidade de busca baseada em query strings.</p>

<h3 id="fetch">fetch</h3>

<p>Para buscar dados de uma API externa ou de teu pr√≥prio servidor, voc√™ pode usar a fun√ß√£o <code>fetch</code> disponibilizada pelo SvelteKit. Ela se comporta de forma id√™ntica √† API nativa <code>fetch</code>, mas com algumas vantagens:</p>
<ul>
  <li>Pode ser usada para fazer requisi√ß√µes autenticadas no servidor, herdando cookies e cabe√ßalhos de autoriza√ß√£o da requisi√ß√£o da p√°gina.</li>
  <li>Requisi√ß√µes internas (como para rotas <code>+server.js</code>) s√£o redirecionadas diretamente para o manipulador de requisi√ß√µes no servidor, sem a sobrecarga de uma chamada HTTP.</li>
  <li>Em alguns casos, √© mais eficiente, pois <a target="_blank" href="https://svelte.dev/docs/kit/load#Making-fetch-requests">evita uma requisi√ß√£o adicional</a>.</li>
</ul>
<p>Crie o arquivo <code ctc>src/routes/03/external/users/+page.server.js</code>:</p>
<pre><code class="language-js">export async function load({ fetch }) {
  const res = await fetch('https://jsonplaceholder.typicode.com/users');
  const users = await res.json();
  return { users };
}</code></pre>
<p><strong>Explica√ß√£o:</strong> Esse c√≥digo faz uma requisi√ß√£o para a API externa <a target="_blank" href="https://jsonplaceholder.typicode.com/">JSONPlaceholder</a> e retorna os dados dos usu√°rios. Como est√° em <code>+page.server.js</code>, a requisi√ß√£o sempre ser√° feita no servidor, protegendo eventuais dados sens√≠veis.</p>
<p>Crie o arquivo <code ctc>src/routes/03/external/users/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h3&gt;Usu√°rios&lt;/h3&gt;
&lt;ul&gt;
  {#each data.users as user}
    &lt;li&gt;&lt;a href=&quot;/03/external/users/{user.id}&quot;&gt;{user.name}&lt;/a&gt;&lt;/li&gt;
  {/each}
&lt;/ul&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Aqui, iteramos sobre os usu√°rios carregados e mostramos uma lista com links para cada um.</p>
<p>Agora vamos carregar as informa√ß√µes de um usu√°rios, bem como suas postagens. Crie o arquivo <code ctc>src/routes/03/external/users/[id]/+page.server.js</code>:</p>
<pre><code class="language-js">export async function load({ params, fetch }) {
  const resUser = await fetch(`https://jsonplaceholder.typicode.com/users/${params.id}`);
  const user = await resUser.json();

  const resPosts = await fetch(`https://jsonplaceholder.typicode.com/users/${params.id}/posts`);
  const posts = await resPosts.json();

  return { user, posts };
}</code></pre>
<p><strong>Explica√ß√£o:</strong> Usamos <code>params.id</code> para buscar os dados de um usu√°rio espec√≠fico e tamb√©m suas postagens. Retornamos tudo no objeto <code>data</code>.</p>
<p>Crie o arquivo <code ctc>src/routes/03/external/users/[id]/+page.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;h3&gt;User&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Nome:&lt;/strong&gt; {data.user.name}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; {data.user.email}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Telefone:&lt;/strong&gt; {data.user.phone}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Website:&lt;/strong&gt; {data.user.website}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Companhia:&lt;/strong&gt; {data.user.company.name}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Endere√ßo:&lt;/strong&gt; {data.user.address.street}, {data.user.address.suite}, {data.user.address.city}, {data.user.address.zipcode}&lt;/p&gt;

&lt;h3&gt;Postagens do usu√°rio&lt;/h3&gt;
&lt;ul&gt;
  {#each data.posts as post}
    &lt;li&gt;&lt;a href=&quot;/03/external/posts/{post.id}&quot;&gt;{post.title}&lt;/a&gt;&lt;/li&gt;
  {:else}
    &lt;p&gt;Esse usu√°rio n√£o postou nada ainda!&lt;/p&gt;
  {/each}
&lt;/ul&gt;
&lt;p&gt;
  &lt;a href=&quot;/03/external/users&quot;&gt;Voltar aos usu√°rios&lt;/a&gt;
&lt;/p&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Exibimos os detalhes do usu√°rio e uma lista de suas postagens. Tamb√©m inclu√≠mos um link de volta √† lista de usu√°rios.</p>

<h2 id="pagedata">page.data</h2>

<p>O componente <code>+page.svelte</code>, assim como cada <code>+layout.svelte</code> acima dele na hierarquia, tem acesso aos seus pr√≥prios dados e tamb√©m aos dados de todos os seus layouts &quot;pais&quot;.</p>
<p>No entanto, em algumas situa√ß√µes precisamos do contr√°rio ‚Äî um layout &quot;pai&quot; pode precisar acessar dados carregados por uma p√°gina ou por um layout &quot;filho&quot;. Um exemplo comum √© o layout raiz (<code>+layout.svelte</code>) querer acessar uma propriedade <code>title</code> retornada pela fun√ß√£o <code>load</code> de um <code>+page.server.js</code>.</p>
<p>Para isso, utilizamos <a target="_blank" href="https://svelte.dev/docs/kit/$app-state#page">page.data</a>.</p>
<p><strong>Modifique</strong> o arquivo <code ctc>src/routes/03/posts/+layout.svelte</code>:</p>
<pre><code class="language-svelte">&lt;script&gt;
  import { page } from '$app/state';
  let { data, children } = $props();

  console.log(page);
&lt;/script&gt;

&lt;svelte:head&gt;
  &lt;title&gt;{page.data.post?.title || page.url.pathname}&lt;/title&gt;
&lt;/svelte:head&gt;

&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col-4 bg-body-secondary&quot;&gt;
    &lt;aside&gt;
      &lt;h4&gt;√öltimos posts&lt;/h4&gt;
      &lt;ul&gt;
        {#each data.posts.slice(0, 2) as post}
          &lt;li&gt;
            &lt;a href=&quot;/03/posts/{post.slug}&quot;&gt;
              {post.title}
            &lt;/a&gt;
          &lt;/li&gt;
        {/each}
      &lt;/ul&gt;
    &lt;/aside&gt;
  &lt;/div&gt;
  &lt;div class=&quot;col&quot;&gt;
    &lt;main&gt;
      {@render children()}
    &lt;/main&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p><strong>Explica√ß√£o:</strong> Aqui, o layout acessa <code>page.data.post?.title</code> para definir o t√≠tulo da aba dinamicamente com base na p√°gina carregada.</p>

<h2 id="cliente-vs-servidor">Cliente vs Servidor</h2>

<p>Al√©m das fun√ß√µes <code>load</code> nos arquivos <code>+layout.server.js</code> e <code>+page.server.js</code>, que sempre s√£o executadas no servidor, tamb√©m existem as fun√ß√µes <code>load</code> nos arquivos <code>+layout.js</code> e <code>+page.js</code>, conhecidas como fun√ß√µes <code>load</code> universais. Essas fun√ß√µes podem ser executadas tanto no servidor quanto no navegador (a menos que sejam combinadas com <code>export const ssr = false</code>, caso em que elas ser√£o executadas <a target="_blank" href="https://svelte.dev/docs/kit/page-options#ssr">somente no navegador</a>).</p>
<p>Por padr√£o, as fun√ß√µes <code>load</code> universais s√£o executadas no servidor durante o SSR (Server-Side Rendering) quando o usu√°rio visita a p√°gina pela primeira vez. Elas ser√£o executadas novamente durante o processo de <a target="_blank" href="https://svelte.dev/docs/kit/glossary#Hydration">hidrata√ß√£o</a>, reutilizando quaisquer respostas de <a target="_blank" href="https://svelte.dev/docs/kit/load#Making-fetch-requests">requisi√ß√µes fetch</a> feitas anteriormente. Todas as invoca√ß√µes subsequentes dessas fun√ß√µes <code>load</code> universais ocorrer√£o no navegador. Voc√™ pode personalizar esse comportamento por meio das <a target="_blank" href="https://svelte.dev/docs/kit/page-options">op√ß√µes da p√°gina</a>. Por exemplo, se desativar a op√ß√£o de p√°gina <a target="_blank" href="https://svelte.dev/docs/kit/page-options#ssr">server-side rendering</a>, voc√™ estar√° criando uma SPA (Single Page Application), e todas as fun√ß√µes <code>load</code> universais ser√£o executadas no cliente.</p>
<p>Se uma rota contiver tanto fun√ß√µes <code>load</code> universais quanto fun√ß√µes <code>load</code> espec√≠ficas para o servidor, a fun√ß√£o <code>load</code> do servidor ser√° executada primeiro.</p>
<p>A fun√ß√£o <code>load</code> √© invocada em tempo de execu√ß√£o, a menos que voc√™ <a target="_blank" href="https://svelte.dev/docs/kit/page-options#prerender">pr√©-renderize</a> a p√°gina ‚Äî nesse caso, ela ser√° invocada em tempo de compila√ß√£o.</p>

<h3 id="quando-usar-cada-tipo">Quando usar o qu√™</h3>
<ul>
  <li>
    <p>Se a sua fun√ß√£o <code>load</code> deve ser executada sempre no servidor, por exemplo, quando utiliza vari√°veis de ambiente privadas ou acessa um banco de dados ou sistema de arquivos, ela deve ser colocada em um <code>+page.server.js</code>.</p>
  </li>
  <li>
    <p>Como o SvelteKit pode acessar os dados diretamente da API sem passar pelo seu servidor, se voc√™ precisar buscar dados de uma API externa e n√£o precisar de credenciais privadas, use o <code>+page.js</code>.</p>
  </li>
</ul>

<h2 id="conclus√£o">Conclus√£o</h2>

<p>O SvelteKit oferece uma s√©rie de recursos poderosos para carregar dados de maneira eficiente, seja do servidor, de APIs externas ou de fontes internas. Ao entender as diferen√ßas entre as fun√ß√µes <code>load</code> nos arquivos <code>+page.server.js</code>, <code>+layout.server.js</code>, <code>+page.js</code> e <code>+layout.js</code>, voc√™ pode otimizar o desempenho de teu aplicativo, aproveitando o que h√° de melhor em renderiza√ß√£o no servidor e no cliente. Para explorar mais sobre esses recursos e como aplic√°-los, consulte a <a target="_blank" href="https://svelte.dev/docs/kit/load">documenta√ß√£o oficial</a>.</p>

<h2 id="exerc√≠cios">Exerc√≠cios</h2>

<ol class="excs">
  <li>Tornar as p√°ginas de teu aplicativo SvelteKit completamente naveg√°veis, permitindo a navega√ß√£o entre todas as rotas criadas.
    <p><strong>Passos:</strong></p>
    <ol>
      <li>Crie um menu de navega√ß√£o lateral com links para todas as p√°ginas criadas.</li>
      <li>Assegure que cada p√°gina tenha um link de navega√ß√£o que a leve de volta √† p√°gina inicial ou para outra p√°gina do aplicativo.</li>
      <li>Teste a navega√ß√£o para garantir que todas as p√°ginas est√£o acess√≠veis e funcionando corretamente.</li>
    </ol>
  </li>
  <li>Implementar as fun√ß√µes utilizadas do banco de dados <code>database.js</code>:
    <ol>
      <li><code>getAll()</code></li>
      <li><code>getByYearMonth(ano, mes)</code></li>
      <li><code>getBySlug(slug)</code></li>
      <li><code>getByQuery(title, content)</code></li>
    </ol>
  </li>
  <li>Utilizando a API REST <a target="_blank" href="https://pokeapi.co/">https://pokeapi.co/</a>, implemente uma p√°gina que liste os pok√©mons, com um link que redireciona para a p√°gina de detalhes de cada pok√©mon.</li>
  <p><strong>Poss√≠vel solu√ß√£o:</strong></p>
  <p>Crie o arquivo <code ctc>src/routes/03/pokemon/+page.svelte</code></p>
  <pre><code>&lt;script&gt;
  let { data } = $props();
&lt;/script&gt;

&lt;div class="row"&gt;
  {#each data.pokemons as p}
    &lt;div class="col-md-3 col-sm-6 mb-3"&gt;
      &lt;div class="card"&gt;
        &lt;img src={p.image} alt={p.name} class="card-img-top" /&gt;
        &lt;div class="card-body"&gt;
          &lt;a href="/03/pokemon/{p.name}" class="stretched-link text-decoration-none"&gt;
            &lt;h5 class="card-title text-capitalize"&gt;{p.name}&lt;/h5&gt;
          &lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  {/each}
&lt;/div&gt;</code></pre>
  <p>Explica√ß√£o:</p>
  <p>Este c√≥digo cria uma lista de pok√©mons com suas imagens. Cada card √© colocado em uma coluna que ocupa largura 3/12 em telas m√©dias pra cima, e largura 6/12 em telas pequenas pra cima, e ocupa 100% da largura em telas menores. O link que direciona para uma p√°gina com mais informa√ß√µes sobre o Pok√©mon.</p>
  <p>A classe <code>card-img-top</code> √© usada para a imagem, e <code>card-body</code> envolve o conte√∫do textual. <code>stretched-link</code> permite que a √°rea inteira do card seja clic√°vel.</p>

  <p>Agora vamos ver de onde os dados s√£o carregados.</p>
  <p>Crie o arquivo <code ctc>src/routes/03/pokemon/+page.js</code></p>
  <pre><code class="js">export async function load() {
  const limit = 12;
  const offset = 0;

  const res = await fetch(`https://pokeapi.co/api/v2/pokemon?offset=${offset}&limit=${limit}`);
  const data = await res.json();

  for (const pokemon of data.results) {
    const id = pokemon.url.split("/").at(-2);
    pokemon.image = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png`;
  }

  return { pokemons: data.results };
}</code></pre>
  <p>Explica√ß√£o:</p>
  <p>O c√≥digo faz uma requisi√ß√£o √† PokeAPI para listar os pok√©mons com limite de 12 por p√°gina. Ele extrai o ID da URL e gera a URL da imagem correspondente.</p>
  <li>Implemente pagina√ß√£o para listar os Pok√©mons.
    <p><strong>Passos</strong>:</p>
    <ol>
      <li>Exiba apenas um n√∫mero limitado de itens por p√°gina (por exemplo, 20 pok√©mons por p√°gina).</li>
      <li>Implemente bot√µes de navega√ß√£o para mudar de p√°gina, como &quot;Pr√≥ximo&quot; e &quot;Anterior&quot;.</li>
      <li>Ao clicar em um bot√£o de navega√ß√£o, a p√°gina ser√° atualizada com os novos itens da pr√≥xima ou da p√°gina anterior.</li>
      <li>Teste a navega√ß√£o para garantir que a pagina√ß√£o funcione corretamente, carregando os pok√©mons conforme esperado.</li>
    </ol>
  </li>
  <li>Implemente uma funcionalidade de busca para filtrar os pok√©mons com base em par√¢metros de consulta (query params), como o tipo do pok√©mon.</li>
  <li>Quando o usu√°rio clicar em um pok√©mon, crie uma p√°gina dedicada para exibir os detalhes desse pok√©mon.</li>
</ol>