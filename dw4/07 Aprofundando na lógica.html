<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-svelte/dist/svelte.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js"></script>
    <script defer>hljs.configure({ languages: ["svelte"] }); hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>

    <!-- https://github.com/arronhunt/highlightjs-copy -->
    <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script defer>hljs.addPlugin(new CopyButtonPlugin());</script>

    <!-- https://github.com/TRSasasusu/highlightjs-highlight-lines.js -->
    <script src="https://cdn.jsdelivr.net/gh/TRSasasusu/highlightjs-highlight-lines.js@1.2.0/highlightjs-highlight-lines.min.js"></script>
    <script defer>hljs.highlightLinesAll([
            // [{ start: 2, end: 2, color: 'lightgreen' }, { start: 9, end: 9, color: 'lightblue' }, { start: 14, end: 14, color: 'lightblue' }]
        ]);
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body,{delimiters:[{left: '$$', right: '$$', display: true},{left: '$', right: '$', display: false}]});"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.css">
    <script src="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.js"></script>
</head>

<h1>Aprofundando na l√≥gica</h1>

<h2>Leitura</h2>

<p>Leia a seguinte se√ß√£o de "Logic":</p>
<ul>
    <li><a href="https://svelte.dev/tutorial/svelte/each-blocks">Each blocks</a></li>
</ul>

<h2>Percurso em lista</h2>
<p>Crie o arquivo <code ctc>src/routes/06a-frutas/+page.svelte</code>:</p>
<pre><code>&lt;script&gt;
  const frutas = [&apos;a√ßa√≠&apos;, &apos;caj√°&apos;, &apos;coco&apos;, &apos;figo&apos;, &apos;ing√°&apos;];
&lt;/script&gt;

&lt;h2&gt;Minhas frutas preferidas&lt;/h2&gt;
&lt;ul&gt;
  {#each frutas as fruta}
    &lt;li&gt;{fruta}&lt;/li&gt;
  {/each}
&lt;/ul&gt;</code></pre>

<p>Explica√ß√£o:</p>
<ul>
    <li>Linha 2: Declarada uma lista <code>frutas</code> com v√°rias frutas como itens.</li>
    <li>Linha 7: Percorre <strong>cada</strong> item <code>fruta</code> da lista <code>frutas</code>.</li>
    <li>Linha 8: O que est√° dentro do <code>#each</code> ser√° repetido. Neste caso, v√°rios elementos <code>li</code> ser√£o repetidos, um para cada fruta.</li>
</ul>

<h2>Lista de tarefas</h2>
<p>Crie o arquivo <code ctc>src/routes/06b-lista-tarefas/+page.svelte</code>:</p>
<pre><code>&lt;script&gt;
  const tarefas = $state([]);
  let tarefa = $state();
&lt;/script&gt;

&lt;h2&gt;Tarefas a fazer&lt;/h2&gt;
&lt;input placeholder=&quot;Tarefa...&quot; bind:value={tarefa} /&gt;
&lt;button onclick={() =&gt; tarefas.push(tarefa)}&gt;Adicionar tarefa&lt;/button&gt;
&lt;ul&gt;
  {#each tarefas as tarefa, i}
    &lt;li&gt;{tarefa} (&lt;a href=&quot;#/&quot; onclick={() =&gt; tarefas.splice(i, 1)}&gt;üóë&lt;/a&gt;)&lt;/li&gt;
  {/each}
&lt;/ul&gt;</code></pre>

<p>Explica√ß√£o:</p>
<ul>
    <li>Linha 8: O comando <code>tarefas.push(tarefa)</code> adiciona a vari√°vel <code>tarefa</code> √† lista <code>tarefas</code>.</li>
    <li>Linha 10: Ao percorrer por cada item da lista, podemos paralelamente percorrer seus √≠ndices, declarando outra vari√°vel, que aqui, nomeamos como <code>i</code>.</li>
    <li>Linha 11: O comando <code>tarefas.splice(i, 1)</code> exclui da lista <code>tarefas</code> o item no √≠ndice <code>i</code>.</li>
</ul>

<h2>Exerc√≠cios</h2>
<ol class="excs">
    <li>Na lista de tarefas a fazer, al√©m da op√ß√£o de excluir um item, implementar a op√ß√£o para editar e cancelar a edi√ß√£o de um item.</li>
    <p>Uma poss√≠vel solu√ß√£o (faltou cancelar a edi√ß√£o):</p>
    <pre><code>&lt;script&gt;
    const tarefas = $state([&apos;lavar a lou√ßa&apos;, &apos;arrumar o quarto&apos;, &apos;comprar chocolate pro amigo secreto&apos;]);
    let tarefaNova = $state(&apos;&apos;);
    let tarefaEditandoIndice = $state(null);
    let tarefaEditando = $state(&apos;&apos;);

    function adicionarTarefa() {
        if (tarefaNova.trim()) {
            tarefas.push(tarefaNova);
            tarefaNova = &apos;&apos;;
        }
    }

    function excluirTarefa(i) {
        tarefas.splice(i, 1);
    }

    function editarTarefa(i) {
        tarefaEditandoIndice = i;
        tarefaEditando = tarefas[i];
    }

    function salvarTarefa(i) {
        tarefas[i] = tarefaEditando.trim();
        tarefaEditandoIndice = null;
    }

    function cancelarEdicao() {}
&lt;/script&gt;

&lt;h2&gt;Lista de tarefas&lt;/h2&gt;
&lt;p&gt;
    &lt;input placeholder=&quot;Digite a tarefa...&quot; bind:value={tarefaNova} /&gt;
    &lt;button onclick={adicionarTarefa}&gt;‚ûï&lt;/button&gt;
&lt;/p&gt;
&lt;ul&gt;
    {#each tarefas as tarefa, i}
        &lt;li&gt;
            {#if tarefaEditandoIndice == i}
                &lt;input bind:value={tarefaEditando} /&gt;
                &lt;button onclick={() =&gt; salvarTarefa(i)}&gt;üíæ&lt;/button&gt;
                &lt;button onclick={cancelarEdicao}&gt;‚ùå&lt;/button&gt;
            {:else}
                {tarefa}
                &lt;button onclick={() =&gt; editarTarefa(i)}&gt;‚úè&lt;/button&gt;
                &lt;button onclick={() =&gt; excluirTarefa(i)}&gt;üóë&lt;/button&gt;
            {/if}
        &lt;/li&gt;
    {/each}
&lt;/ul&gt;</code></pre>
    <p>Explica√ß√£o:
    <ul>
        <li>No bloco <code>{#each}</code> da linha 37, as vari√°veis <code>tarefa</code> e <code>i</code> s√£o declaradas localmente para cada itera√ß√£o da lista <code>tarefas</code>. Elas est√£o dispon√≠veis apenas dentro do bloco <code>{#each}</code> e n√£o podem ser acessadas diretamente no <code>script</code>.</li>
        <li>Assim, devemos passar a vari√°vel <code>i</code> como argumento para as fun√ß√µes <code>salvarTarefa</code>, <code>editarTarefa</code> e <code>excluirTarefa</code>, que s√£o executadas no <code>script</code>.</li>
        <li>Entretanto, com o Svelte, para invocar dentro da propriedade <code>onclick</code> uma fun√ß√£o que recebe argumentos, devemos envolv√™-la (<i>wrap</i>) em <i>arrow functions</i>.</li>
        <li>Para fun√ß√µes que n√£o recebem argumentos, como as fun√ß√µes <code>adicionarTarefa</code> e <code>cancelarEdicao</code> das linhas 34 e 42, n√£o precisamos envolv√™-las em <i>arrow functions</i>.</li>
        <li>Mais sobre essa explica√ß√£o <a href="https://stackoverflow.com/a/61025286/4072641">aqui</a>.</li>
    </ul>
    <li>Agora, implemente uma op√ß√£o para marcar um item como conclu√≠do. Dica: Voc√™ pode manter duas listas, uma de tarefas conclu√≠das e outra de tarefas a fazer. Ao marcar uma tarefa como conclu√≠da, a exclui da lista a fazer, e a adiciona na lista de conclu√≠das. Ao desmarcar uma tarefa como conclu√≠da, faz o contr√°rio.</li>
    <li>Estilize tua lista de tarefas a fazer. Procure na internet por exemplos de <i>todo list</i> para se inspirar.</li>
</ol>