<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script defer>hljs.configure({ languages: ["javascript"] }); hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>

    <!-- https://github.com/arronhunt/highlightjs-copy -->
    <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script defer>hljs.addPlugin(new CopyButtonPlugin());</script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.css">
    <script src="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.js"></script>
</head>
<h1>CompilaÃ§Ã£o do App</h1>
<p>Para compilar um projeto CapacitorJS em um app Android, vocÃª precisa ter o Android SDK instalado em teu computador. Antes de prosseguir, siga o <a href="03 Tutorial Preparando o Ambiente Android para CapacitorJS.pdf" target="_blank">tutorial de preparaÃ§Ã£o do ambiente Android para CapacitorJS</a>.
</p>

<h2 id="preparando-para-instalar-o-app-no-celular-ou-emulador">âœ… Preparando para instalar o app no celular ou emulador</h2>
<p>Crie ou edite o arquivo <code>src/routes/+layout.js</code>, adicionando as seguintes linhas:</p>
<pre><code>export const prerender = true;
export const ssr = false;</code></pre>

<!-- <p>No SvelteKit, a diretiva <code>export const prerender = true</code> no arquivo <code>+layout.js</code> indica que as rotas do seu app devem ser <strong>prÃ©-renderizadas</strong> no momento da build â€” ou seja, gerar arquivos HTML e JS estÃ¡ticos prontos para serem servidos, sem depender de um servidor backend em tempo real.</p>

<strong>E por que isso Ã© importante com o Capacitor?</strong>

<p>O Capacitor executa o app em um <strong>WebView</strong> embarcado no Android (ou iOS), carregando o conteÃºdo do app a partir de arquivos <strong>estÃ¡ticos</strong> (HTML, CSS, JS).</p>

<p>EntÃ£o, se o SvelteKit <strong>nÃ£o</strong> for instruÃ­do a gerar tudo como estÃ¡tico, ele pode tentar fazer coisas como:</p>
<ul>
    <li>Criar endpoints dinÃ¢micos que nÃ£o funcionam sem um servidor,</li>
    <li>Depender de Server-side rendering (SSR),</li>
    <li>Deixar pÃ¡ginas fora da build porque esperava renderizÃ¡-las sob demanda.</li>
</ul>

<p><strong>Com <code>prerender = true</code>, o SvelteKit:</strong></p>
<ul>
    <li>Gera arquivos estÃ¡ticos de cada pÃ¡gina e rota.</li>
    <li>Garante que tudo que vocÃª precisa estarÃ¡ acessÃ­vel no <code>build/</code> (que Ã© onde o Capacitor vai buscar para construir o app).</li>
</ul> -->

<h2>âš™ Compilando o projeto</h2>
<p>Depois de editar o cÃ³digo-fonte (HTML, JS, Svelte etc.) ou arquivos estÃ¡ticos (CSS, imagens), se quiser testar no celular ou emulador, <strong>construa o app com</strong>:</p>
<pre><code class="sh">pnpm build</code></pre>

<p>VocÃª tambÃ©m deve executar <code>npx cap sync</code> nas seguintes situaÃ§Ãµes:</p>
<ol>
    <li>Ã‰ a <strong>primeira vez</strong> que vocÃª executa o comando.</li>
    <li>VocÃª <strong>adicionou, removeu ou atualizou</strong> plugins (Capacitor ou Cordova) ou bibliotecas que envolvem cÃ³digo nativo (Android/iOS).</li>
    <li>Alterou o arquivo <code>capacitor.config.ts</code> ou <code>capacitor.config.json</code> (ex: <code>appId</code>, <code>server.url</code>, <code>backgroundColor</code> etc.).</li>
</ol>

<blockquote>
    <p>ğŸ“Œ VocÃª <em>nÃ£o precisa</em> rodar <code>npx cap sync</code> quando apenas edita o cÃ³digo-fonte ou arquivos estÃ¡ticos.</p>
</blockquote>

<hr />

<h2 id="instalando-o-app-no-emulador">ğŸ“± Instalando o app no emulador</h2>
<p>VocÃª vai precisar de um <strong>emulador Android</strong>, que pode ser instalado seguindo o <a href="03 Tutorial Preparando o Ambiente Android para CapacitorJS.pdf" target="_blank">tutorial de preparaÃ§Ã£o do ambiente Android para CapacitorJS</a>.</p>
<p>Se jÃ¡ tiver um emulador Android, para instalar o app nele, execute:</p>
<pre><code class="sh">npx cap run android</code></pre>
<p>Se solicitado, selecione o emulador desejado.</p>

<hr />

<h2 id="instalando-o-app-no-celular">ğŸ“² Instalando o app no celular</h2>
<p>VocÃª vai precisar do programa <code>adb</code>, que pode ser instalado seguindo o <a href="03 Tutorial Preparando o Ambiente Android para CapacitorJS.pdf" target="_blank">tutorial de preparaÃ§Ã£o do ambiente Android para CapacitorJS</a>.</p>

<h3 id="conectando-o-celular-via-cabo-usb">ğŸ”Œ Conectando o celular via cabo USB</h3>
<ol>
    <li>Ative o <strong>modo desenvolvedor</strong> no celular (dependendo da versÃ£o, pode mudar):
        <ul>
            <li>VÃ¡ em <em>ConfiguraÃ§Ãµes &gt; Sobre o telefone</em> e toque vÃ¡rias vezes em â€œNÃºmero da versÃ£oâ€ atÃ© ativar as opÃ§Ãµes de desenvolvedor.</li>
        </ul>
    </li>
    <li>Ative as <strong>OpÃ§Ãµes do desenvolvedor</strong> (dependendo da versÃ£o, pode mudar):
        <ul>
            <li>VÃ¡ atÃ© <em>Sistema &gt; AvanÃ§ado &gt; OpÃ§Ãµes do desenvolvedor</em> e ative as opÃ§Ãµes:</li>
            <li><strong>OpÃ§Ãµes do desenvolvedor</strong></li>
            <li><strong>DepuraÃ§Ã£o USB</strong></li>
            <li><strong>Instalar via USB</strong> (se disponÃ­vel)</li>
        </ul>
    </li>
    <li>Conecte o celular ao computador. Aceite o pop-up â€œPermitir depuraÃ§Ã£o USBâ€ e marque â€œSempre permitirâ€.
        <blockquote>
            <p>Se o pop-up nÃ£o aparecer, desative e reative as opÃ§Ãµes do desenvolvedor e a depuraÃ§Ã£o USB.</p>
        </blockquote>
    </li>
    <li>No terminal, verifique a conexÃ£o:
        <pre><code class="sh">adb devices</code></pre>
    </li>
    <li>Com o celular conectado e reconhecido, instale o app:
        <pre><code class="sh">npx cap run android</code></pre>
        <p>Se solicitado, selecione o celular conectado.</p>
    </li>
</ol>

<hr />

<h3 id="conectando-o-celular-via-wi-fi">ğŸ“¡ Conectando o celular via Wi-Fi</h3>
<p>VocÃª pode conectar teu celular ao computador se ambos estiverem na mesma rede:</p>
<ol>
    <li>
        <p>Ative o modo desenvolvedor e habilite a <strong>depuraÃ§Ã£o via Wi-Fi</strong>.</p>
    </li>
    <li>
        <p>Descubra o IP do celular (dependendo da versÃ£o, pode mudar):<br />
            <em>ConfiguraÃ§Ãµes &gt; Sobre o telefone &gt; Status &gt; EndereÃ§o IP</em>
        </p>
    </li>
    <li>
        <p>No terminal:</p>
        <pre><code class="sh">adb tcpip 5555
adb connect x.x.x.x:5555</code></pre>

        <blockquote>
            <p>Substitua <code>x.x.x.x</code> pelo IP de teu celular.</p>
        </blockquote>
    </li>
    <li>Instale o app via Wi-Fi:
        <pre><code class="sh">npx cap run android --target x.x.x.x:5555</code></pre>
    </li>
</ol>

<hr />

<h3 id="instalando-o-app-manualmente">ğŸ›  Instalando o app manualmente</h3>
<p>Com o Android SDK instalado, vocÃª pode gerar o <code>.apk</code> manualmente:</p>
<pre><code class="sh">cd android
./gradlew assembleDebug</code></pre>

<p>O arquivo serÃ¡ gerado em <code>&lt;teu-projeto-capacitor&gt;/android/app/build/outputs/apk/debug/app-debug.apk</code>.</p>

<p>Para instalar via <code>adb</code> na pasta raiz do projeto:</p>
<pre><code class="sh">adb install android/app/build/outputs/apk/debug/app-debug.apk</code></pre>

<p>Ou copie o <code>.apk</code> para o celular e instale manualmente.</p>

<hr />

<h2 id="debugando-com-o-chrome-webview">ğŸ Debugando com o Chrome (WebView)</h2>
<p>VocÃª pode depurar teu app com o Chrome DevTools:</p>
<ol>
    <li>Conecte o celular com o <code>adb</code>.</li>
    <li>Abra o Chrome no computador.</li>
    <li>Acesse:<br /><code>chrome://inspect</code></li>
    <li>Clique em <strong>â€œinspectâ€</strong> abaixo do WebView de teu app para abrir as DevTools.</li>
</ol>

<blockquote>
    <p>ğŸ’¡ Dica: vocÃª tambÃ©m pode adicionar <code>console.log</code> no cÃ³digo. O conteÃºdo serÃ¡ exibido no log da WebView.</p>
</blockquote>

<p>Para acompanhar os logs gerados pelo aplicativo, filtrando pelas mensagens que vocÃª deseja ver, execute conforme teu sistema operacional:</p>
<p><strong>Linux:</strong></p>
<pre><code class="sh">adb logcat | grep filtro</code></pre>

<p><strong>Windows:</strong></p>
<pre><code class="ps">adb logcat | Select-String -Pattern filtro</code></pre>

<p>Onde <code>filtro</code> Ã© o conteÃºdo de log que deseja filtrar.</p>

<hr />