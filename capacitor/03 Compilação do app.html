<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script defer>hljs.configure({ languages: ["javascript"] }); hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>

    <!-- https://github.com/arronhunt/highlightjs-copy -->
    <link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css" />
    <script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script>
    <script defer>hljs.addPlugin(new CopyButtonPlugin());</script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.css">
    <script src="https://cdn.jsdelivr.net/gh/pedrosiqueira/custom-style/custom.min.js"></script>
</head>
<h1>Compilação do App</h1>
<p>Para compilar um projeto CapacitorJS em um app Android, você precisa ter o Android SDK instalado em teu computador. Siga o <a href="Tutorial Preparando o Ambiente Android para CapacitorJS.pdf">Tutorial Preparando o Ambiente Android para CapacitorJS</a> para tal.</p>
<h2 id="preparando-para-instalar-o-app-no-celular-ou-emulador">✅ Preparando para instalar o app no celular ou emulador</h2>
<p>Depois de editar o código-fonte (HTML, JS, Svelte etc.) ou arquivos estáticos (CSS, imagens), e quiser testar no celular ou emulador, <strong>construa o app com</strong>:</p>
<pre><code class="sh">pnpm build</code></pre>
<p>Você também deve executar <code>npx cap sync</code> nas seguintes situações:</p>
<ol type="1">
    <li>É a <strong>primeira vez</strong> que você executa o comando.</li>
    <li>Você <strong>adicionou, removeu ou atualizou</strong> plugins (Capacitor ou Cordova) ou bibliotecas que envolvem código nativo (Android/iOS).</li>
    <li>Alterou o arquivo <code>capacitor.config.ts</code> ou <code>capacitor.config.json</code> (ex: <code>appId</code>, <code>server.url</code>, <code>backgroundColor</code> etc.).</li>
</ol>
<blockquote>
    <p>📌 Você <em>não precisa</em> rodar <code>npx cap sync</code> quando apenas edita o código-fonte ou arquivos estáticos.</p>
</blockquote>
<hr />

<h2 id="instalando-o-app-no-emulador">📱 Instalando o app no emulador</h2>
<p>Se você já seguiu o <strong>Tutorial Preparando o Ambiente Android para CapacitorJS</strong>, deve ter um emulador instalado. Para instalar o app no emulador:</p>
<pre><code class="sh">npx cap run android</code></pre>
<p>Se solicitado, selecione o emulador desejado.</p>
<hr />
<h2 id="instalando-o-app-no-celular">📲 Instalando o app no celular</h2>
<p>Você vai precisar do programa <code>adb</code>, que pode ser instalado seguindo o <strong>Tutorial Preparando o Ambiente Android para CapacitorJS</strong>.</p>
<h3 id="conectando-o-celular-via-cabo-usb">🔌 Conectando o celular via cabo USB</h3>
<ol type="1">
    <li>Ative o <strong>modo desenvolvedor</strong> no celular (dependendo da versão, pode mudar):
        <ul>
            <li>Vá em <em>Configurações &gt; Sobre o telefone</em> e toque várias vezes em “Número da versão” até ativar as opções de desenvolvedor.</li>
        </ul>
    </li>
    <li>Ative as <strong>Opções do desenvolvedor</strong> (dependendo da versão, pode mudar):
        <ul>
            <li>Vá até <em>Sistema &gt; Avançado &gt; Opções do desenvolvedor</em> e ative as opções:</li>
            <li><strong>Opções do desenvolvedor</strong></li>
            <li><strong>Depuração USB</strong></li>
            <li><strong>Instalar via USB</strong> (se disponível)</li>
        </ul>
    </li>
    <li>Conecte o celular ao computador. Aceite o pop-up “Permitir depuração USB” e marque “Sempre permitir”.</li>
</ol>
<blockquote>
    <p>Se o pop-up não aparecer, desative e reative as opções do desenvolvedor e a depuração USB.</p>
</blockquote>
<ol start="4" type="1">
    <li>No terminal, verifique a conexão:</li>
</ol>
<div class="sourceCode" id="cb12">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="ex">adb</span> devices</span></code></pre>
</div>
<ol start="5" type="1">
    <li>Com o celular conectado e reconhecido, instale o app:</li>
</ol>
<div class="sourceCode" id="cb13">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="ex">npx</span> cap run android</span></code></pre>
</div>
<p>Se solicitado, selecione o celular conectado.</p>
<hr />
<h3 id="conectando-o-celular-via-wi-fi">📡 Conectando o celular via Wi-Fi</h3>
<ol type="1">
    <li>
        <p>Ative o modo desenvolvedor e habilite a <strong>depuração via Wi-Fi</strong>.</p>
    </li>
    <li>
        <p>Descubra o IP do celular (dependendo da versão, pode mudar):<br />
            <em>Configurações &gt; Sobre o telefone &gt; Status &gt; Endereço IP</em>
        </p>
    </li>
    <li>
        <p>No terminal:</p>
    </li>
</ol>
<div class="sourceCode" id="cb14">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="ex">adb</span> tcpip 5555</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="ex">adb</span> connect x.x.x.x:5555</span></code></pre>
</div>
<blockquote>
    <p>Substitua <code>x.x.x.x</code> pelo IP de teu celular.</p>
</blockquote>
<ol start="4" type="1">
    <li>Instale o app via Wi-Fi:</li>
</ol>
<div class="sourceCode" id="cb15">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="ex">npx</span> cap run android --target x.x.x.x:5555</span></code></pre>
</div>
<hr />
<h3 id="instalando-o-app-manualmente">🛠 Instalando o app manualmente</h3>
<p>Com o Android SDK instalado, você pode gerar o <code>.apk</code> manualmente:</p>
<div class="sourceCode" id="cb16">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="bu">cd</span> android</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="ex">./gradlew</span> assembleDebug</span></code></pre>
</div>
<p>O arquivo será gerado em:</p>
<pre><code>android/app/build/outputs/apk/debug/app-debug.apk</code></pre>
<p>Para instalar via <code>adb</code>:</p>
<div class="sourceCode" id="cb18">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="ex">adb</span> install android/app/build/outputs/apk/debug/app-debug.apk</span></code></pre>
</div>
<p>Ou copie o <code>.apk</code> para o celular e instale manualmente.</p>
<hr />
<h2 id="debugando-com-o-chrome-webview">🐞 Debugando com o Chrome (WebView)</h2>
<p>Você pode depurar teu app com o Chrome DevTools:</p>
<ol type="1">
    <li>Conecte o celular com o <code>adb</code>.</li>
    <li>Abra o Chrome no computador.</li>
    <li>Acesse:<br />
        <code>chrome://inspect</code>
    </li>
    <li>Clique em <strong>“inspect”</strong> abaixo do WebView de teu app para abrir as DevTools.</li>
</ol>
<blockquote>
    <p>💡 Dica: você também pode adicionar <code>console.log</code> no código e o conteúdo será exibido no log da WebView.</p>
</blockquote>
<p>Para acompanhar os logs gerados pelo aplicativo, filtrando pelas mensagens que você deseja ver, execute conforme teu sistema operacional:</p>
<p>Linux:</p>
<div class="sourceCode" id="cb19">
    <pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="ex">adb</span> logcat <span class="kw">|</span> <span class="fu">grep</span> filtro</span></code></pre>
</div>
<p>Windows:</p>
<div class="sourceCode" id="cb20">
    <pre class="sourceCode ps"><code class="sourceCode postscript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a>adb logcat | Select-<span class="kw">String</span> -<span class="kw">Pattern</span> filtro</span></code></pre>
</div>
<p>Onde <code>filtro</code> se refere à mensagem de log que queira filtrar.</p>
<hr />
<h2 id="observações">📝 Observações</h2>
<ul>
    <li>
        <p>Sobre navbar fixa com Bootstrap: &gt; “Fixed navbars usam <code>position: fixed</code>, o que pode exigir ajustes de layout, como <code>padding-top</code> no <code>&lt;body&gt;</code> para evitar sobreposição.” — <a href="https://getbootstrap.com/docs/5.3/components/navbar/#placement">Bootstrap docs</a><br />
            Por isso foi usado <code>style="margin-bottom: 4rem;"</code> no <code>&lt;body&gt;</code>.</p>
    </li>
    <li>
        <p>Sugestão de desafio: implementar animações em Svelte usando o tutorial:<br />
            👉 https://svelte.dev/tutorial/svelte/animations</p>
    </li>
</ul>
<hr />